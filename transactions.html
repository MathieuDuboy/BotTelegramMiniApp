<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NovaBotCard Mini App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js?56"></script> 
    <script src="https://apis.google.com/js/api.js"></script>
    
</head>

<body>
    <nav class="navbar navbar-dark fixed-top d-flex align-items-center justify-content-center" style="position: relative;">
        <button id="backButton" class="btn btn-outline-primary btn-sm text-white" 
                style="position: absolute; left: 10px;" 
                onclick="goBack()">&lt; Back</button>
        <div class="navbar-title text-center">💳 NovaBotCard</div>
    </nav>
    <div id="app" class="container mb-5 pb-5 pt-2">
        <div id="home" class="mt-4">
            <!-- Bloc Transactions -->
            <h4 class="mt-4 section-header text-left d-flex justify-content-between">
                Transactions
                <a href="/transactions" class="btn btn-link btn-sm text-muted">See all</a>
            </h4>
            <div class="card">
                <div class="card-body">
                    <ul class="list-group">
                        <!-- Transaction 1 -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-credit-card fa-lg me-3 text-primary"></i>
                                <div>
                                    <h5 class="mb-0" style="font-size: 1.1rem;">Achat de crypto</h5>
                                    <small class="text-muted">12 Mars 2025, 14:30</small>
                                </div>
                            </div>
                            <div class="d-flex flex-column align-items-end">
                                <span class="badge bg-primary rounded-pill mb-2">+200 €</span>
                                <a href="#" onclick="showPage('details')" class="btn btn-link btn-sm">Détails</a>
                            </div>
                        </li>

                        <!-- Transaction 2 -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-wallet fa-lg me-3 text-success"></i>
                                <div>
                                    <h5 class="mb-0" style="font-size: 1.1rem;">Dépôt initial</h5>
                                    <small class="text-muted">10 Mars 2025, 09:15</small>
                                </div>
                            </div>
                            <div class="d-flex flex-column align-items-end">
                                <span class="badge bg-success rounded-pill mb-2">+1000 €</span>
                                <a href="#" onclick="showPage('details')" class="btn btn-link btn-sm">Détails</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
        <div id="details" class="mt-4  d-none">
            <h4 class="mt-4 section-header text-left">Détails transaction</h4>
            <div class="card mb-3" style="max-width: 540px;">
                <div class="row g-0">
                  
                  <div class="col">
                    <div class="card-body">
                      <h5 class="card-title">Card title</h5>
                      <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                      <p class="card-text"><small class="text-body-secondary">Last updated 3 mins ago</small></p>
                    </div>
                  </div>
                </div>
              </div>
        </div>
    </div>


    <script>

        function goBack() {
            document.location.href = 'index.html'
        }

       

 

        window.Telegram.WebApp.ready();
const user = window.Telegram.WebApp.initDataUnsafe.user;
const userInfoDiv = document.getElementById("user-info");
const errorDiv = document.createElement("div");
errorDiv.style.cssText = "padding: 10px; background: #ff4d4d; color: white; border-radius: 5px; margin-top: 10px; display: none;";
document.body.appendChild(errorDiv);

// Affichage des infos utilisateur ou erreur
if (user) {
    userInfoDiv.innerHTML = `
        <h2>Salut ${user.first_name} 👋</h2>
        <p><strong>ID:</strong> ${user.id}</p>
        <p><strong>Nom d'utilisateur:</strong> ${user.username || 'Pas de username'}</p>
        <p><strong>Langue:</strong> ${user.language_code}</p>
    `;
} else {
    showError("Impossible de récupérer les infos utilisateur. ❌");
}

// Fonction pour afficher une alerte stylée
function showError(message) {
    errorDiv.innerText = message;
    errorDiv.style.display = "block";
    console.error(message);

    setTimeout(() => {
        errorDiv.style.display = "none";
    }, 5000);
}

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>